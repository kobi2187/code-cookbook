<!DOCTYPE html>
<html lang="en" id="page">  <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width"/><title>Passing different types to a function parameter  - Haxe Code Cookbook</title><base href="./../.."/>
<link rel="stylesheet" type="text/css" href="http://haxe.org/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" href="css/styles.min.css"/><link rel="icon" href="http://haxe.org/favicon.ico"/><meta name="keywords" content="enum,abstract-type,pattern-matching,type-parameter,type-parameter-constraint,haxe,code,tutorial,snippet,example,demo"/><meta name="description" content="Sometimes you find yourself in the need of passing different types to the same parameter of a function. While there isn't a builtin way of doing this in Haxe, thanks to its flexible type system, we can solve this problem (with some runtime overhead) We will explore two ways to achieve this."/>
<meta name="twitter:creator" content="@haxe_org"/>
<meta property="og:title" content="Passing different types to a function parameter  - Haxe Code Cookbook"/><meta property="og:type" content="article"/><meta property="og:url" content="http://code.haxe.org/"/><meta property="og:image" content="http://code.haxe.org/img/share.png"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400" rel="stylesheet" type="text/css"/>  </head><body><nav class="section nav dark"><div class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-inner"><button class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse" type="button"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="brand haxe-logo" href="http://haxe.org/"><img alt="Haxe" height="21" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'" src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107"/></a><a class="brand sub ide" href="./">CODE</a><div class="nav-collapse collapse"><ul class="nav">
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-book"></i> Browse <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="category/beginner/">Beginner <small class="category-count">(5)</small></a></li><li><a href="category/compilation/">Compilation <small class="category-count">(1)</small></a></li><li><a href="category/data-structures/">Data structures <small class="category-count">(4)</small></a></li><li><a href="category/macros/">Macros <small class="category-count">(15)</small></a></li><li class="active"><a href="category/other/">Other <small class="category-count">(5)</small></a></li><li><a href="category/abstract-types/">Abstract types <small class="category-count">(4)</small></a></li><li><a href="category/design-patterns/">Design-patterns <small class="category-count">(3)</small></a></li><li><a href="category/principles/">Principles <small class="category-count">(3)</small></a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-tags"></i> Tags <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="tag/abstract-type.html" rel="tag"><i class="fa fa-tag"></i> abstract-type <small class="category-count">(5)</small></a></li><li><a href="tag/macro-function.html" rel="tag"><i class="fa fa-tag"></i> macro-function <small class="category-count">(9)</small></a></li><li><a href="tag/iterator.html" rel="tag"><i class="fa fa-tag"></i> iterator <small class="category-count">(3)</small></a></li><li><a href="tag/javascript.html" rel="tag"><i class="fa fa-tag"></i> javascript <small class="category-count">(2)</small></a></li><li><a href="tag/pattern-matching.html" rel="tag"><i class="fa fa-tag"></i> pattern-matching <small class="category-count">(2)</small></a></li><li><a href="tag/enum.html" rel="tag"><i class="fa fa-tag"></i> enum <small class="category-count">(3)</small></a></li><li><a href="tag/class.html" rel="tag"><i class="fa fa-tag"></i> class <small class="category-count">(3)</small></a></li><li><a href="tag/arguments.html" rel="tag"><i class="fa fa-tag"></i> arguments <small class="category-count">(2)</small></a></li><li><a href="tag/validation.html" rel="tag"><i class="fa fa-tag"></i> validation <small class="category-count">(3)</small></a></li><li><a href="tag/conditional-compilation.html" rel="tag"><i class="fa fa-tag"></i> conditional-compilation <small class="category-count">(2)</small></a></li><li><a href="tag/building-fields.html" rel="tag"><i class="fa fa-tag"></i> building-fields <small class="category-count">(6)</small></a></li><li><a href="tag/build-macro.html" rel="tag"><i class="fa fa-tag"></i> build-macro <small class="category-count">(6)</small></a></li><li><a href="tag/libraries.html" rel="tag"><i class="fa fa-tag"></i> libraries <small class="category-count">(2)</small></a></li><li><a href="tag/static-extension.html" rel="tag"><i class="fa fa-tag"></i> static-extension <small class="category-count">(2)</small></a></li><li><a href="tag/dead-code-elimination.html" rel="tag"><i class="fa fa-tag"></i> dead-code-elimination <small class="category-count">(2)</small></a></li></ul></li><li class="divider"></li>
<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="/documentation/">Learn Haxe <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://haxe.org/documentation/">Introduction</a></li><li class="divider"></li><li><a href="http://haxe.org/manual/">Manual</a></li><li><a href="http://api.haxe.org">API Documentation</a></li><li class="divider"></li><li><a href="http://try.haxe.org">Try Haxe</a></li><li><a href="http://lib.haxe.org">Haxelib</a></li><li class="active"><a href="http://code.haxe.org">Code Cookbook</a></li></ul></li><li class=" dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Connect <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://github.com/HaxeFoundation"><i class="fa fa-github"></i> Github</a></li><li><a href="https://github.com/HaxeFoundation/haxe/issues"><i class="fa fa-github"></i> Bug reports</a></li><li><a href="http://stackoverflow.com/questions/tagged/haxe"><i class="fa fa-stack-exchange"></i> Stack Overflow</a></li><li><a href="http://groups.google.com/group/haxelang?hl=en"><i class="fa fa-envelope-o"></i> Google Groups</a></li><li><a href="http://webchat.freenode.net/?channels=haxe"><i class="fa fa-comments-o"></i> IRC</a></li><li><a href="http://haxe.org/blog"><i class="fa fa-rss"></i> Blog</a></li><li class="divider"></li><li><a href="https://plus.google.com/communities/103302587329918132234"><i class="fa fa-google-plus"></i> Google+</a></li><li><a href="https://www.facebook.com/haxe.org/"><i class="fa fa-facebook"></i> Facebook</a></li><li><a href="https://twitter.com/search?q=%23haxe"><i class="fa fa-twitter"></i> #haxe</a></li><li><a href="https://twitter.com/haxelang"><i class="fa fa-twitter"></i> @haxelang</a></li><li><a href="https://twitter.com/haxe_org"><i class="fa fa-twitter"></i> @haxe_org</a></li><li class="divider"></li><li><a href="http://haxe.org/foundation/contact.html">Contact</a></li></ul></li></ul></div></div></div></nav><div class="main-content"><header class="hero-unit-small"><div class="container"><div class="row"><h1>Haxe Code Cookbook</h1></div></div></header><main class="container"><section class="row"><nav class="span4 sidebar-toc" id="sidebar"><h3>Table of contents</h3><ul class="unstyled"><li><a href="category/beginner/">Beginner</a><ul class="unstyled"><li><a href="category/beginner/conditional-compilation.html">Conditional compilation</a></li><li><a href="category/beginner/declare-classes.html">Declare classes</a></li><li><a href="category/beginner/declare-functions.html">Declare functions</a></li><li><a href="category/beginner/hello-world.html">Hello world</a></li><li><a href="category/beginner/using-static-extensions.html">Using static extensions</a></li></ul></li><br/><li><a href="category/compilation/">Compilation</a><ul class="unstyled"><li><a href="category/compilation/compiling-libraries-without-main-class.html">Compiling libraries without main class</a></li></ul></li><br/><li><a href="category/data-structures/">Data structures</a><ul class="unstyled"><li><a href="category/data-structures/grid-iterator.html">Grid iterator</a></li><li><a href="category/data-structures/reverse-iterator.html">Reverse iterator</a></li><li><a href="category/data-structures/sort-array.html">Sorting arrays</a></li><li><a href="category/data-structures/step-iterator.html">Stepped iterator</a></li></ul></li><br/><li><a href="category/macros/">Macros</a><ul class="unstyled"><li><a href="category/macros/add-git-commit-hash-in-build.html">Add git commit-hash in build</a></li><li><a href="category/macros/add-parameters-as-fields.html">Add parameters as fields</a></li><li><a href="category/macros/assert-with-values.html">Assert macro that shows sub-expression values</a></li><li><a href="category/macros/build-map.html">Add a map</a></li><li><a href="category/macros/build-property-with-inline-getter.html">Add property with getter</a></li><li><a href="category/macros/build-static-field.html">Add a static field</a></li><li><a href="category/macros/build-value-objects.html">Create value-objects</a></li><li><a href="category/macros/combine-objects.html">Combine two or more structures</a></li><li><a href="category/macros/completion-from-url.html">Code completion from URL</a></li><li><a href="category/macros/enum-abstract-values.html">Get all values of an @:enum abstract</a></li><li><a href="category/macros/extract-enum-value.html">Extract values from known enum instances</a></li><li><a href="category/macros/generate-dispatch-code.html">Generate dispatch code</a></li><li><a href="category/macros/generating-code-in-a-macro.html">Generating code in a macro</a></li><li><a href="category/macros/get-compiler-define-value.html">Working with compiler flags</a></li><li><a href="category/macros/validate-json.html">Validates a .JSON file compile-time</a></li></ul></li><br/><li><a href="category/other/">Other</a><ul class="unstyled"><li><a href="category/other/adding-static-methods-to-existing-classes.html">Adding static methods to existing classes</a></li><li><a href="category/other/named-parameters.html">Named Parameters</a></li><li class="active"><a href="category/other/passing-different-types-to-a-function-parameter.html">Passing different types to a function parameter</a></li><li><a href="category/other/using-filesystem.html">Using the file system</a></li><li><a href="category/other/using-haxe-classes-in-javascript.html">Using Haxe classes in JavaScript</a></li></ul></li><br/><li><a href="category/abstract-types/">Abstract types</a><ul class="unstyled"><li><a href="category/abstract-types/emailaddress.html">EmailAddress</a></li><li><a href="category/abstract-types/rounded float.html">Rounded Float</a></li><li><a href="category/abstract-types/abstracts-with-type-params.html">Strict typing for stringly-typed extern code</a></li><li><a href="category/abstract-types/temperature-units.html">Temperature units</a></li></ul></li><br/><li><a href="category/design-patterns/">Design-patterns</a><ul class="unstyled"><li><a href="category/design-patterns/factory.html">Factory</a></li><li><a href="category/design-patterns/lazy-initialization.html">Lazy initialization</a></li><li><a href="category/design-patterns/singleton.html">Singleton</a></li></ul></li><br/><li><a href="category/principles/">Principles</a><ul class="unstyled"><li><a href="category/principles/inheritance.html">Inheritance</a></li><li><a href="category/principles/null-safety.html">Null safety</a></li><li><a href="category/principles/everything-is-an-expression.html">Everything is an expression</a></li></ul></li><br/></ul></nav><article class="span8"><h1>Passing different types to a function parameter</h1>
<p>Sometimes you find yourself in the need of passing different types to the same parameter of a function. While there isn't a builtin way of doing this in Haxe, thanks to its flexible type system, we can solve this problem (with some runtime overhead) We will explore two ways to achieve this.</p>
<h3>We want to access a few fields that are present in all our types</h3>
<p>Let's say, for example, that we want to get the <code>length</code> of an <code>Array&lt;T&gt;</code> or an <code>String</code>:</p>
<pre><code class="prettyprint haxe">function length(o:Array&lt;Int&gt;/*or String*/):Int {
  return o.length;
}</code></pre>
<p>That function won't work for us, it will only work for <code>Arrays</code> so we need to find a way to fix it. <em>The laziest</em> and <strong>more dangerous</strong> method we can use is <a href="http://api.haxe.org/Dynamic.html"><code>Dynamic</code></a>.</p>
<pre><code class="prettyprint haxe">function length(o:Dynamic):Int {
  return o.length;
}</code></pre><iframe src="http://try.haxe.org/embed/1639D" class="try-haxe"><a href="http://try.haxe.org/embed/1639D">Try Haxe!</a></iframe>
<p>The problem with this method is, as the <a href="http://haxe.org/manual/types-dynamic.html">manual says</a>, that we can pass anything to the function and the compiler won't care about it, leaving any error or exception to the target language. </p>
<hr />
<p>Isn't there a safer way of doing this so we can catch any error at compile time? We know that both types have a <code>length(default, null):Int</code> field and we are only interested on that field. We can then use <a href="http://haxe.org/manual/type-system-type-parameter-constraints.html">type parameter constraints</a>.</p>
<pre><code class="prettyprint haxe">function length&lt;T:{var length(default, null):Int;}&gt;(o:T) {
  return o.length;
}</code></pre><iframe src="http://try.haxe.org/embed/840Cf" class="try-haxe"><a href="http://try.haxe.org/embed/840Cf">Try Haxe!</a></iframe>
<p>Or, if we are going to use the constraint in more functions, we can use a <a href="http://haxe.org/manual/type-system-typedef.html"><code>typedef</code></a></p>
<pre><code class="prettyprint haxe">typedef Length = {
  var length(default, null):Int;
}
function length&lt;T:Length&gt;(o:T) {
  return o.length;
}

function length2&lt;T:Length&gt;(o:T) {
  return o.length * 2;
}</code></pre><iframe src="http://try.haxe.org/embed/530F7" class="try-haxe"><a href="http://try.haxe.org/embed/530F7">Try Haxe!</a></iframe>
<p>Of course, this will only work if we can constraint the types somehow, what if we can't?</p>
<h3>We want to use different types</h3>
<p>Now, we need a function that takes an <code>Array&lt;Int&gt;</code> or an <code>Int</code> so we can return an <code>Array&lt;Int&gt;</code> after adding a few numbers. If we pass an <code>Array</code> it will return the same <code>Array</code> with the new numbers added, if we pass an <code>Int</code> it will create an <code>Array&lt;Int&gt;</code> from 0 to the value passed and add the new numbers to it. The problem? We can't use the same method we used before because there isn't any constraint we can write for these types.</p>
<p>We can try to use <code>Dynamic</code> again, but as we saw before, it's <em>the laziest</em> and <strong>more dangerous</strong> method we can use because all the errors or exceptions will be at runtime and the compiler won't warn us if we pass another type. </p>
<pre><code class="prettyprint haxe">function add(o:Dynamic):Array&lt;Int&gt; {
  var a:Array&lt;Int&gt;;
  if(Std.is(o, Array)) {
    a = cast o;
  } else if(Std.is(o, Int)) {
    a = [for(i in 0...Std.int(o)) i];
  } else {
    throw "The value isn't an Array or an Int";
  }

  a.push(100);
  a.push(300);

  return a;
}</code></pre>
<blockquote>
<p>We also lose the type of the <code>Array</code> (<code>Int</code>) because this information is only used at compile time and erased at runtime. This is why we can't use <code>Std.is(o, Array&lt;Int&gt;)</code></p></blockquote><iframe src="http://try.haxe.org/embed/a2c00" class="try-haxe"><a href="http://try.haxe.org/embed/a2c00">Try Haxe!</a></iframe>
<hr />
<p>Is there another more type safer way that let the compiler catch possible errors at compile time? Yes there is! We can use <a href="http://api.haxe.org/haxe/ds/Either.html"><code>haxe.ds.Either</code></a></p>
<pre><code class="prettyprint haxe">function add(o:haxe.ds.Either&lt;Array&lt;Int&gt;, Int&gt;):Array&lt;Int&gt; {
  var a:Array&lt;Int&gt;;
  switch(o) {
    case Left(x): a = x;
    case Right(x): a = [for(i in 0...x) i];
  }

  a.push(100);
  a.push(300);

  return a;
}</code></pre>
<p>And we can use it like:</p>
<pre><code class="prettyprint haxe">trace("Passing an Array&lt;Int&gt;: " + add(Left([10, 20, 30])));
trace("Passing an Int: " + add(Right(3)));</code></pre><iframe src="http://try.haxe.org/embed/6dA36" class="try-haxe"><a href="http://try.haxe.org/embed/6dA36">Try Haxe!</a></iframe>
<p>Great! The code is now type safe and the compiler will error if we give it the wrong types but... isn't it a bit cumbersome? We need to remember that if we want to pass an <code>Array&lt;Int&gt;</code> we need to use <code>Left()</code> and if we want to pass an <code>Int</code> we need to use <code>Right()</code> Can we make it easier to work with? The answer is... <strong>yes!</strong></p>
<hr />
<p>This method solves all the problems every other method had. It's based on the last method but, thanks to the powerful Haxe <a href="http://haxe.org/manual/types-abstract.html">abstracts types</a>, we can let the compiler do the job for us.</p>
<p>First of all we need to write the abstract:</p>
<pre><code class="prettyprint haxe">import haxe.ds.Either;

abstract OneOf&lt;A, B&gt;(Either&lt;A, B&gt;) from Either&lt;A, B&gt; to Either&lt;A, B&gt; {
  @:from inline static function fromA&lt;A, B&gt;(a:A):OneOf&lt;A, B&gt; {
    return Left(a);
  }
  @:from inline static function fromB&lt;A, B&gt;(b:B):OneOf&lt;A, B&gt; {
    return Right(b);  
  } 
    
  @:to inline function toA():Null&lt;A&gt; return switch(this) {
    case Left(a): a; 
    default: null;
  }
  @:to inline function toB():Null&lt;B&gt; return switch(this) {
    case Right(b): b;
    default: null;
  }
}</code></pre>
<p>And we will need to modify our <code>add()</code> function to:</p>
<pre><code class="prettyprint haxe">function add(o:OneOf&lt;Array&lt;Int&gt;, Int&gt;):Array&lt;Int&gt; {
  var a:Array&lt;Int&gt;;
  switch(o) {
    case Left(x): a = x;
    case Right(x): a = [for(i in 0...x) i];
  }

  a.push(100);
  a.push(300);

  return a;
}</code></pre><iframe src="http://try.haxe.org/embed/4f2Dd" class="try-haxe"><a href="http://try.haxe.org/embed/4f2Dd">Try Haxe!</a></iframe>
<p>Nice! We get type safety, compile time errors and we can let the compiler do the dirty job for us. </p>
<hr />
<p>You may be wondering "what if I want to use more types?" Well, <code>haxe.ds.Either</code> is just an <code>enum</code> (<a href="https://github.com/HaxeFoundation/haxe/blob/development/std/haxe/ds/Either.hx">source code</a>) so nothing stops you from writing an <code>enum</code> with more type parameters and modify <code>OneOf</code> to accept more <code>@:from</code> and <code>@:to</code>. Of course, you can always use <a href="http://haxe.org/manual/macro.html"><strong>macros</strong></a> to create it and the abstract but we will leave that for another day.</p>
<blockquote>
<p>Learn more about Haxe abstract types: <a href="http://haxe.org/manual/types-abstract.html">http://haxe.org/manual/types-abstract.html</a>
Learn more about Type parameter constraints: <a href="http://haxe.org/manual/type-system-type-parameter-constraints.html">http://haxe.org/manual/type-system-type-parameter-constraints.html</a></p>
<p>Author: <a href="https://github.com/mrcdk">Justo Delgado Baudí</a></p></blockquote><div class="tags"><hr/>Tags: <span class="tag"><i class="fa fa-tag"></i>&nbsp;<a href="tag/enum.html" rel="tag">enum</a></span><span class="tag"><i class="fa fa-tag"></i>&nbsp;<a href="tag/abstract-type.html" rel="tag">abstract-type</a></span><span class="tag"><i class="fa fa-tag"></i>&nbsp;<a href="tag/pattern-matching.html" rel="tag">pattern-matching</a></span><span class="tag"><i class="fa fa-tag"></i>&nbsp;<a href="tag/type-parameter.html" rel="tag">type-parameter</a></span><span class="tag"><i class="fa fa-tag"></i>&nbsp;<a href="tag/type-parameter-constraint.html" rel="tag">type-parameter-constraint</a></span></div><hr/><div class="contribution"><i class="fa fa-lightbulb-o"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/edit/master/./assets/content/cookbook/Other/passing-different-types-to-a-function-parameter.md">Suggest improvement</a> | <i class="fa fa-exclamation-circle"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/issues/new?title=[Passing different types to a function parameter]&body=%0A%0ASources:%0A*%20http://code.haxe.org/category/other/passing-different-types-to-a-function-parameter.html%0A*%20https://github.com/HaxeFoundation/code-cookbook/tree/master/./assets/content/cookbook/Other/passing-different-types-to-a-function-parameter.md">Report issue</a> |<i class="fa fa-plus-circle"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/new/master/./assets/content/cookbook/Other/snippet-name.md/?filename=snippet-name.md">Add new snippet</a></div></article></section></main></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>&copy;2016&nbsp;<a class="hf-link" href="http://haxe.org/foundation/" title="Haxe Foundation Website">Haxe Foundation</a> |&nbsp;<a href="https://github.com/HaxeFoundation/code-cookbook" title="Haxe Code Cookbook on Github">Code Cookbook on Github</a> </p><p class="last-modified">Last modified: 16-08-2016</p></div></div></footer><link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css"/>

<link rel="stylesheet" type="text/css" href="css/haxe-nav.min.css"/><script src="http://haxe.org/js/jquery.min.js"></script><script src="http://haxe.org/js/bootstrap.min.js"></script><script src="js/highlighter.js"></script><script>  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');  ga('create', 'UA-74262827-2', 'auto');  ga('send', 'pageview');</script></body></html>